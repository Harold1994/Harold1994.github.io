<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>用Docker安装tensorflow | lyyourc</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/app.css">
  <!-- <link rel='stylesheet' href='http://fonts.useso.com/css?family=Source+Code+Pro'> -->
  
</head>

<body>
  <nav class="app-nav">
  
    
      <a href="/.">home</a>
    
  
    
      <a href="/archives">archive</a>
    
  
    
      <a href="/atom.xml">rss</a>
    
  
</nav>

  <main class="post">
  <article>
  <h1 class="article-title">
    <a href="/2018/07/06/用Docker安装tensorflow/">用Docker安装tensorflow</a>
  </h1>

  <section class="article-meta">
    <p class="article-date">July 06 2018</p>
  </section>

  <section class="article-entry">
    <h4 id="1-关于TensorFlow"><a href="#1-关于TensorFlow" class="headerlink" title="1 关于TensorFlow"></a>1 关于TensorFlow</h4><hr>
<p>TensorFlow 随着AlphaGo的胜利也火了起来。google又一次成为大家膜拜的大神了。google大神在引导这机器学习的方向。 同时docker 也是一个非常好的工具，大大的方便了开发环境的构建，之前需要配置安装。 看各种文档，现在只要一个 pull 一个 run 就可以把环境弄好了。 同时如果有写地方需要个性化定制，直接在docker的镜像上面再加一层补丁就好了。 自己的需求就能满足了，同时还可以将这个通用的方法分享出去。</p>
<a id="more"></a>     
<h4 id="2-下载TensorFlow-images"><a href="#2-下载TensorFlow-images" class="headerlink" title="2 下载TensorFlow images"></a>2 下载TensorFlow images</h4><hr>
<p>使用hub.docker.com的镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull tensorflow/tensorflow:latest1</span><br></pre></td></tr></table></figure>
<p>使用daocloud 的镜像，在国内用速度还是挺快的，如果docker.io的镜像慢，可以用daocloud的。<br>这个速度非常的快。一样用的。版本也挺新的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull daocloud.io/daocloud/tensorflow:latest 1</span><br></pre></td></tr></table></figure>
<h4 id="3-启动镜像"><a href="#3-启动镜像" class="headerlink" title="3 启动镜像"></a>3 启动镜像</h4><hr>
<p>启动命令，设置端口，同时配置volume 数据卷，用于永久保存数据。加上 –rm 在停止的时候删除镜像。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /data/tensorflow/notebooks</span><br><span class="line">docker run -it --rm --name myts -v /data/tensorflow/notebooks:/notebooks -p 8888:8888 daocloud.io/daocloud/tensorflow:latest12</span><br></pre></td></tr></table></figure>
<p>启动的时候并不是daemon 模式的，而是前台模式，同时显示了运行的日志。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">W 06:48:13.425 NotebookApp] WARNING: The notebook server is listening on all IP addresses and not using encryption. This is not recommended.</span><br><span class="line">[I 06:48:13.432 NotebookApp] Serving notebooks from local directory: /notebooks</span><br><span class="line">[I 06:48:13.432 NotebookApp] 0 active kernels </span><br><span class="line">[I 06:48:13.432 NotebookApp] The Jupyter Notebook is running at: http://[all ip addresses on your system]:8888/?token=2031705799dc7a5d58bc51b1f406d8771f0fdf3086b95642</span><br><span class="line">[I 06:48:13.433 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).</span><br><span class="line">[C 06:48:13.433 NotebookApp] </span><br><span class="line"></span><br><span class="line">    Copy/paste this URL into your browser when you connect for the first time,</span><br><span class="line">    to login with a token:</span><br><span class="line">        http://localhost:8888/?token=2031705799dc7a5d58bc51b1f406d8771f0fdf3086b9564212345678910</span><br></pre></td></tr></table></figure>
<p>打开浏览器就可以直接看到界面了，同时可以编辑内容：</p>
<p><img src="http://p5s7d12ls.bkt.clouddn.com/18-7-6/87067696.jpg" alt=""></p>
<h4 id="4-固定token"><a href="#4-固定token" class="headerlink" title="4 固定token"></a>4 固定token</h4><hr>
<p>vi run_jupyter.sh</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env bash</span><br><span class="line">jupyter notebook --no-browser --NotebookApp.token=&apos;token1234&apos; &gt; /notebooks/jupyter-notebook.log 12</span><br></pre></td></tr></table></figure>
<p>然后重新打一个docker镜像。<br>vi Dockerfile</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">FROM daocloud.io/daocloud/tensorflow:latest</span><br><span class="line">RUN rm -f /run_jupyter.sh</span><br><span class="line">COPY run_jupyter.sh /run_jupyter.sh</span><br><span class="line">ENTRYPOINT [&quot;/run_jupyter.sh&quot;]1234</span><br></pre></td></tr></table></figure>
<p>这样就固定token了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker build -t mytf:1.0 .</span><br><span class="line">docker run -it --rm --name myts -v /data/tensorflow/notebooks:/notebooks -p 8888:8888 -d mytf:1.012</span><br></pre></td></tr></table></figure>
<p>然后就可以 -d 参数，将docker 运行放到后台。然后就可以使用 docker exec -it xxx bash 登录进去查看系统的状况了。</p>
<h4 id="5-总结"><a href="#5-总结" class="headerlink" title="5 总结"></a>5 总结</h4><p>docker 真的是非常好的技术，能够快速的搭建好环境，省去了繁琐的安装配置过程。 最后使用参数将环境跑起来，同时也可以根据自己的需求，给镜像增加新的功能，就像是盖房子。 一层一层的盖。所有的层，构成了一个整体的房子。 同时对于 TensorFlow 来说是一个程序员必须的技能了。就像是 lucence一样，其实大家都不太了解那个索引算法的。但是还是可以创建出一个索引分词来。 TensorFlow 也是一样的。当做一个工具来使用就好了，具体的算法也不太精通。 有一个说法，数据量上去了，用大数据优化，比算法优化要效果好。</p>
<p>文章来自：<a href="https://blog.csdn.net/freewebsys/article/details/70237003" target="_blank" rel="noopener">https://blog.csdn.net/freewebsys/article/details/70237003</a></p>

  </section>
</article>

  <div class="sharing grid">
  <section class="profile grid-item grid">
    <img class="avatar" src="http://7xrcp8.com1.z0.glb.clouddn.com/avatar.png" alt="avatar" />
    <div class="grid-item">
      <p class="title"> lyyourc </p>
      <p class="subtitle"> You Are The JavaScript In My HTML </p>
    <div>
  </section>

  <section class="share-btns">
    <!-- <p> share it if you like it~ </p> -->
    <a
  class="twitter-share-button"
  data-size="large"
  data-via="DrakeLeung"
  href="https://twitter.com/intent/tweet?text= id="1-关于TensorFlow""
>
  Tweet
</a>

<script>
  window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  js.async = true;
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
</script>

  </section>
</div>


  
    
<section class="article-comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

<script>
  var disqus_shortname = 'drakeleung';
  
  var disqus_url = '//harold.me/2018/07/06/用Docker安装tensorflow/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


  
</main>

</body>
</html>
