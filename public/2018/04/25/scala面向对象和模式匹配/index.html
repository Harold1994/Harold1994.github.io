<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>scala面向对象和模式匹配 | lyyourc</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/app.css">
  <!-- <link rel='stylesheet' href='http://fonts.useso.com/css?family=Source+Code+Pro'> -->
  
</head>

<body>
  <nav class="app-nav">
  
    
      <a href="/.">home</a>
    
  
    
      <a href="/archives">archive</a>
    
  
    
      <a href="/atom.xml">rss</a>
    
  
</nav>

  <main class="post">
  <article>
  <h1 class="article-title">
    <a href="/2018/04/25/scala面向对象和模式匹配/">scala面向对象和模式匹配</a>
  </h1>

  <section class="article-meta">
    <p class="article-date">April 25 2018</p>
  </section>

  <section class="article-entry">
    <p><strong>1.创建类、属性</strong></p>
<ul>
<li><p>scala声明类时不需要加public关键字，默认为public，一个类文件可以声明多个类，用object声明的与class同名的类为class的伴生类</p>
</li>
<li><p>属性不需要创建getter和setter，val默认只有get方法，因为他不可变;var有get 和 set 方法</p>
</li>
<li><p>用private修饰的属性，该属性属于私有变量，只有本类和伴生对象中才能访问</p>
</li>
<li><p>用private[this] 修饰的属性属于对象私有变量，只有本类可访问，伴生对象也无法访问</p>
<a id="more"></a>
</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;<span class="comment">//声明类</span></span><br><span class="line">  <span class="keyword">val</span> id: <span class="type">String</span> = <span class="string">"100"</span></span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span> = _</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">var</span> age: <span class="type">Int</span> = _</span><br><span class="line">  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">val</span> gender = <span class="string">"male"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Person</span> </span>&#123;<span class="comment">//伴生类</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> p = <span class="keyword">new</span> <span class="type">Person</span>()</span><br><span class="line">    <span class="comment">//    println(p.id = "123")//val不可修改</span></span><br><span class="line">    p.name = <span class="string">"ningning"</span></span><br><span class="line">    p.age = <span class="number">26</span></span><br><span class="line">    println(p.name)</span><br><span class="line">    println(p.age)</span><br><span class="line">    println(p.gender)<span class="comment">//无法访问</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> p = <span class="keyword">new</span> <span class="type">Person</span>()</span><br><span class="line">    println(p.age) <span class="comment">// 无法访问</span></span><br><span class="line">    println(p.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2.构造器和辅助构造器</strong></p>
<ul>
<li>主构造器：在类名后给一个参数列表，相当于构造器</li>
<li>主构造器中的属性变量如果没有val或var修饰，默认是val类型，只能在本类调用，创建出来的实例无法访问该属性,可以给定初始值，这样在创建对象传参的时候可以不给该值传参</li>
<li>辅助构造器：在class作用范围内定义：<code>def this(主构造器参数列表，其他参数列表)</code>，类似于java当中的不同的构造器拥有不同的参数列表，但是都要实现默认构造器</li>
<li>在辅助构造器第一行必须调用主构造器</li>
<li>返回方法：不用<code>retrun</code>,最后一句代码的值作为返回值</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment">  * 主构造器参数列表放到类名后面，和类名放在一起</span></span><br><span class="line"><span class="comment">  * @param name</span></span><br><span class="line"><span class="comment">  * @param age</span></span><br><span class="line"><span class="comment">  * @param faceValue</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StructDemo</span>(<span class="params">val name: <span class="type">String</span>, var age:<span class="type">Int</span>, faceValue: <span class="type">Int</span> = 90</span>) </span>&#123; /</span><br><span class="line">  <span class="keyword">var</span> gender: <span class="type">String</span> = _<span class="comment">//此处定义为var，方便在后面的构造器变值</span></span><br><span class="line">  <span class="comment">// /faceValue没有val或var修饰，只能在本类调用，创建出来的实例无法访问该属性,可以给定初始值，在创建对象的时候可以不指定faceValue的值</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">getFaceValue</span></span>() :<span class="type">Int</span> = &#123;</span><br><span class="line"><span class="comment">//    faceValue = 100//此时值不可更改，默认是val类型</span></span><br><span class="line">    faceValue</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(name: <span class="type">String</span>, age:<span class="type">Int</span>, faceValue: <span class="type">Int</span>, gender:<span class="type">String</span>)&#123;<span class="comment">//辅助构造器</span></span><br><span class="line">        <span class="keyword">this</span>(name, age, faceValue)<span class="comment">//第一行必须调用主构造器</span></span><br><span class="line">        <span class="keyword">this</span>.gender = gender</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">StructDemo</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"><span class="comment">//    val s = new StructDemo("ningning", 23)</span></span><br><span class="line">     <span class="keyword">val</span> s = <span class="keyword">new</span> <span class="type">StructDemo</span>(<span class="string">"ningning"</span>,<span class="number">26</span>,<span class="number">98</span>,<span class="string">"女"</span>)</span><br><span class="line">    s.age = <span class="number">29</span></span><br><span class="line">    println(s.age)</span><br><span class="line">    println(s.name)</span><br><span class="line">    println(s.getFaceValue())</span><br><span class="line">    println(s.gender)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3.单例对象</strong></p>
<ul>
<li><p>scala中没有static修饰符，没有静态方法或静态字段，但可以用object关键字加类名语法结构实现同样的功能</p>
<blockquote>
<p>1.工具类，存放常量和个工具方法</p>
<p>2.实现单例模式</p>
</blockquote>
</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">SingletonDemo</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> factory = <span class="type">SessionFactory</span></span><br><span class="line">    println(factory.getSessions)</span><br><span class="line">    println(factory.getSessions.size)</span><br><span class="line">    println(factory.getSessions(<span class="number">0</span>))</span><br><span class="line">    println(factory.removeSession)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">SessionFactory</span> </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 相当于java中的静态块</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  println(<span class="string">"SessionFactory executed"</span>)</span><br><span class="line">  <span class="keyword">var</span> i = <span class="number">5</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">val</span> session = <span class="keyword">new</span> <span class="type">ArrayBuffer</span>[<span class="type">Session</span>]()</span><br><span class="line">  <span class="keyword">while</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    session += <span class="keyword">new</span> <span class="type">Session</span></span><br><span class="line">    i -= <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">getSessions</span> </span>= session</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">removeSession</span></span>: <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> s = session(<span class="number">0</span>)</span><br><span class="line">    session.remove(<span class="number">0</span>)</span><br><span class="line">    println(<span class="string">"session removed:"</span> + s)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Session</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>4.伴生对象</strong></p>
<ul>
<li>名字与类名相同，且用object修饰的对象叫伴生对象</li>
<li>类和其伴生对象可以相互访问私有的方法和属性</li>
<li>和单例对象的关系：单例对象不一定是伴生对象，但是伴生对象一定是单例对象</li>
<li>互相访问的作用：</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">var</span> name = <span class="string">"erha"</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">printName</span></span>() : <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//访问伴生对象的私有属性</span></span><br><span class="line">    println(<span class="type">Dog</span>.<span class="type">CONSTANT</span> + name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">伴生对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">val</span> <span class="type">CONSTANT</span> = <span class="string">"BARK! BARK!"</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> p = <span class="keyword">new</span> <span class="type">Dog</span></span><br><span class="line">    <span class="comment">//访问类中的私有字段</span></span><br><span class="line">    println(p.name)</span><br><span class="line">    p.name = <span class="string">"dahuang"</span></span><br><span class="line">    p.printName()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>5.apply和unapply方法</strong></p>
<ul>
<li>一般被声明在伴生对象中</li>
<li>apply方法一般称为注入方法，可以用来初始化对象</li>
<li>apply方法的参数列表不需要和构造器参数列表统一</li>
<li>unapply方法常称为提取方法，可以用来提取固定对象</li>
<li>unapply方法会返回一个序列（Option）,内部产生一个Some对象来存放一些值</li>
<li>apply和unapply方法会被隐式调用</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">applyDemo</span>(<span class="params">val name: <span class="type">String</span>, var age: <span class="type">Int</span>, var faceValue: <span class="type">Int</span></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">applyDemo</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(name: <span class="type">String</span>, age: <span class="type">Int</span>, gender: <span class="type">Int</span>, faceValue: <span class="type">Int</span>): applyDemo =</span><br><span class="line">    <span class="keyword">new</span> applyDemo(name, age, faceValue)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">unapply</span></span>(arg: applyDemo): <span class="type">Option</span>[(<span class="type">String</span>, <span class="type">Int</span>, <span class="type">Int</span>)] = &#123;</span><br><span class="line">    <span class="keyword">if</span> (arg == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="type">None</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="type">Some</span>(arg.name, arg.age, arg.faceValue)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 调用方式</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test2</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> res = applyDemo(<span class="string">"ningning"</span>, <span class="number">23</span>, <span class="number">1</span>, <span class="number">86</span>) <span class="comment">//不用new，用apply方法创建了一个对象</span></span><br><span class="line">    res <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="comment">//模式匹配，调用unapply方法</span></span><br><span class="line">      <span class="keyword">case</span> applyDemo(<span class="string">"ningning"</span>, age, faceValue) =&gt; println(<span class="string">s"age: <span class="subst">$age</span>"</span>) <span class="comment">//在字符串中输出值的方式</span></span><br><span class="line">      <span class="keyword">case</span> _ =&gt; println(<span class="string">"no match"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>6.private关键字</strong></p>
<ul>
<li>变量前加private，该变量为私有字段</li>
<li>变量前加private[this]，表示<em>对象私有字段</em>，只能在本类访问，伴生对象也不能访问</li>
<li>方法前加private，表示私有方法</li>
<li>类名前加private[包名]，表示该类只有包访问权限</li>
<li>构造器参数列表前加private是指伴生对象权限，只有伴生对象才能访问</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//包访问权限</span></span><br><span class="line"><span class="keyword">private</span>[ch02] <span class="class"><span class="keyword">class</span> <span class="title">PrivateDemo</span> <span class="title">private</span>(<span class="params">val gender: <span class="type">Int</span>, val faceValue: <span class="type">Int</span></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//私有字段</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">val</span> name = <span class="string">"jingjing"</span></span><br><span class="line">  <span class="comment">//对象私有字段</span></span><br><span class="line">  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">var</span> age = <span class="number">24</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//私有方法</span></span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(name + <span class="string">"say hello"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">PrivateDemo</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> privateDemo = <span class="keyword">new</span> <span class="type">PrivateDemo</span>(<span class="number">1</span>, <span class="number">88</span>)</span><br><span class="line">    privateDemo.sayHello()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test3</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> privateDemo = <span class="keyword">new</span> <span class="type">PrivateDemo</span>(<span class="number">0</span>, <span class="number">90</span>)</span><br><span class="line">    <span class="comment">//    privateDemo.sayHello() 访问不到</span></span><br><span class="line">    print(privateDemo.faceValue) <span class="comment">//编译不能通过</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>7.特质、重写、抽象类和重写</strong></p>
<ul>
<li>特质：类似java中的接口，用<code>trait 类名</code>声明</li>
<li>抽象类： <code>abstract 类名</code>声明，抽象类没有实现的方法，继承它的类一定要实现。</li>
<li>继承：extends关键字</li>
<li>实现接口：with关键字，与java中的implements类似，实现特质中没有实现的方法可以不用override</li>
<li>重现方法或字段：override</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDEmo</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> human = <span class="keyword">new</span> <span class="type">Human</span></span><br><span class="line">    println(human.name)</span><br><span class="line">    println(human.fight)</span><br><span class="line">    println(human.distance)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Flyable</span> </span>&#123;</span><br><span class="line">  <span class="comment">//声明一个没有值的字段</span></span><br><span class="line">  <span class="keyword">val</span> distance: <span class="type">Int</span> = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//声明一个没有实现的方法</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">fight</span></span>: <span class="type">String</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//声明一个实现的方法</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">fly</span></span>: <span class="type">Unit</span> = &#123;</span><br><span class="line">    print(<span class="string">"I can fly"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 抽象类</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="comment">//声明一个没有值的字段</span></span><br><span class="line">  <span class="keyword">val</span> name: <span class="type">String</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//声明一个没有实现的方法</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">run</span></span>(): <span class="type">String</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//声明一个实现的方法</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">climb</span></span>: <span class="type">String</span> = &#123;</span><br><span class="line">    <span class="string">"In can climb"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span> <span class="keyword">extends</span> <span class="title">Animal</span> <span class="keyword">with</span> <span class="title">Flyable</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">val</span> name: <span class="type">String</span> = <span class="string">"zhangsan"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//重写抽象类没有实现的方法</span></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">run</span></span>(): <span class="type">String</span> = <span class="string">"I can run"</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">val</span> distance: <span class="type">Int</span> = <span class="number">900</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//实现特质中没有实现的方法</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">fight</span></span>: <span class="type">String</span> = <span class="string">"With rob"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//实现特质中实现了的方法</span></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">fly</span></span>: <span class="type">Unit</span> = println(<span class="string">"override fly"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>8.模式匹配</strong></p>
<ul>
<li>类似java中的switch…case,但是功能更强大</li>
<li>case_的作用队标java中的default</li>
<li></li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 匹配字符串</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">MatchStr</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> arr = <span class="type">Array</span>(<span class="string">"java"</span>,<span class="string">"scala"</span>,<span class="string">"python"</span>,<span class="string">"c++"</span>)</span><br><span class="line">    <span class="keyword">val</span> name = arr(<span class="type">Random</span>.nextInt(arr.length))</span><br><span class="line">    println(name)</span><br><span class="line">    name <span class="keyword">match</span>  &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">"java"</span> =&gt; print(<span class="string">"java"</span>)</span><br><span class="line">      <span class="keyword">case</span> <span class="string">"scala"</span> =&gt; print(<span class="string">"scala"</span>)</span><br><span class="line">      <span class="keyword">case</span> <span class="string">"python"</span> =&gt; print(<span class="string">"python"</span>)</span><br><span class="line">      <span class="keyword">case</span> <span class="string">"c++"</span> =&gt; print(<span class="string">"c++"</span>)</span><br><span class="line">      <span class="keyword">case</span> <span class="string">"_"</span> =&gt; print(<span class="string">"nothing match"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 匹配类型</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">MatchType</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> arr = <span class="type">Array</span>(<span class="string">"abcds"</span>, <span class="number">100</span>, <span class="number">3.14</span>, <span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">val</span> element = arr(<span class="type">Random</span>.nextInt(arr.length))</span><br><span class="line">    print(element)</span><br><span class="line">    element <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> str:<span class="type">String</span> =&gt; println(<span class="string">s"a matches String:<span class="subst">$str</span>"</span>)</span><br><span class="line">      <span class="keyword">case</span> int: <span class="type">Int</span>=&gt; println(<span class="string">s"a matches String:<span class="subst">$int</span>"</span>)</span><br><span class="line">      <span class="keyword">case</span> bool:<span class="type">Boolean</span> =&gt; println(<span class="string">s"a matches String:<span class="subst">$bool</span>"</span>)</span><br><span class="line">      <span class="keyword">case</span> matchTest:<span class="type">MatchTest</span> =&gt; println(<span class="string">s"a matches MatchTest:<span class="subst">$matchTest</span>"</span>)</span><br><span class="line">      <span class="keyword">case</span> _: <span class="type">Any</span> =&gt;  println(<span class="string">"not match"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 样例类匹配</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">CaseClassDemo</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> arr = <span class="type">Array</span>(<span class="type">CheckTimeOutTask</span>, <span class="type">SubmiTask</span>(<span class="string">"1000"</span>,<span class="string">"task-01"</span>), <span class="type">HeartBeat</span>(<span class="number">3000</span>))</span><br><span class="line"></span><br><span class="line">    arr(<span class="type">Random</span>.nextInt(arr.length))  <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="type">CheckTimeOutTask</span> =&gt; println(<span class="string">"Check"</span>)</span><br><span class="line">      <span class="keyword">case</span> <span class="type">SubmiTask</span>(port,taskName) =&gt; println(<span class="string">"submit"</span>)</span><br><span class="line">      <span class="keyword">case</span> <span class="type">HeartBeat</span>(time) =&gt; println(<span class="string">"heart"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">HeartBeat</span>(<span class="params">time: <span class="type">Long</span></span>)</span></span><br><span class="line"><span class="class"><span class="title">case</span> <span class="title">class</span> <span class="title">SubmiTask</span>(<span class="params">id:<span class="type">String</span>, taskName: <span class="type">String</span></span>)</span></span><br><span class="line"><span class="class"><span class="title">case</span> <span class="title">object</span> <span class="title">CheckTimeOutTask</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 偏函数模式匹配</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">PartialFunctionDemo</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">m1</span></span>: <span class="type">PartialFunction</span>[<span class="type">String</span>, <span class="type">Int</span>] = &#123;</span><br><span class="line">    <span class="comment">//String是输入类型，Int是输出类型</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"one"</span> =&gt; &#123;</span><br><span class="line">      println(<span class="string">"case 1"</span>)</span><br><span class="line">      <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"two"</span> =&gt; &#123;</span><br><span class="line">      println(<span class="string">"case2"</span>)</span><br><span class="line">      <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">m2</span></span>(num: <span class="type">String</span>): <span class="type">Int</span> = num <span class="keyword">match</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"one"</span> =&gt; <span class="number">1</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"two"</span> =&gt; <span class="number">2</span></span><br><span class="line">    <span class="keyword">case</span> _ =&gt; <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(m1(<span class="string">"one"</span>))</span><br><span class="line">    println(m2(<span class="string">"three"</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

  </section>
</article>

  <div class="sharing grid">
  <section class="profile grid-item grid">
    <img class="avatar" src="http://7xrcp8.com1.z0.glb.clouddn.com/avatar.png" alt="avatar" />
    <div class="grid-item">
      <p class="title"> lyyourc </p>
      <p class="subtitle"> You Are The JavaScript In My HTML </p>
    <div>
  </section>

  <section class="share-btns">
    <!-- <p> share it if you like it~ </p> -->
    <a
  class="twitter-share-button"
  data-size="large"
  data-via="DrakeLeung"
  href="https://twitter.com/intent/tweet?text=<strong>1.创建类、属性</st"
>
  Tweet
</a>

<script>
  window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  js.async = true;
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
</script>

  </section>
</div>


  
    
<section class="article-comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

<script>
  var disqus_shortname = 'drakeleung';
  
  var disqus_url = '//harold.me/2018/04/25/scala面向对象和模式匹配/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


  
</main>

</body>
</html>
